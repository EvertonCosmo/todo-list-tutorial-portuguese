# \#6: üì• Property binding

Agora temos nosso componente input-button-unit, mas ele n√£o faz muita coisa. N√≥s queremos dar vida a ele.

Vamos adicionar um elemento de input HTML e fazer com que o texto do controle reflita no valor da propriedade 'title'

Vamos reverter o componente para esse estado antes dos nosso experimentos com seus m√©todos:

{% code-tabs %}
{% code-tabs-item title="src/app/input-button-unit/input-button-unit.component.ts" %}

```typescript
import { Component, OnInit } from '@angular/core';

@Component({
  selector: 'app-input-button-unit',
  template: `
    <p>input-button-unit works! The title is: {{ title }}</p>
  `,
  styleUrls: ['./input-button-unit.component.css']
})
export class InputButtonUnitComponent implements OnInit {
  title = 'Hello World';

  constructor() {}

  ngOnInit() {}
}
```

{% endcode-tabs-item %}
{% endcode-tabs %}

Vamos adicionar um elemento de input e um bot√£o no template:

{% code-tabs %}
{% code-tabs-item title="src/app/input-button-unit/input-button-unit.component.ts" %}

```markup
template: `
  <p>
    input-button-unit works!
    The title is: {{ title }}
  </p>

  <input>
  <button>Save</button>
`,
```

{% endcode-tabs-item %}
{% endcode-tabs %}

Lembrete: N√≥s utilizamos interpola√ß√£o para apresentar o valor da propriedade `title` : `{{ title }}`. O Angular ir√° apresentar o valor de `title` cada vez que nosso componente `app-input-button-unit` for visualizado.

E se quisermos mostrar o valor do t√≠tulo dentro do pr√≥prio controle input do HTML?

Todo elemento `input` tem uma propriedade chamada `value`, que cont√©m a string que √© vista dentro da caixa do `input`. No HTML, n√≥s podemos passar a string diretamente pelo atributo `value` do elemento:

{% code-tabs %}
{% code-tabs-item title="src/app/input-button-unit/input-button-unit.component.ts" %}

```markup
<input value="Hello World">
```

{% endcode-tabs-item %}
{% endcode-tabs %}

Por√©m n√≥s perdemos o bind din√¢mico entre as propriedades do controller e do template.

O Angular permite ligar as propriedades do template de uma forma f√°cil e conveniente; N√≥s vimos isso atrav√©s da interpola√ß√£o. Agora n√≥s veremos como fazer o bind a uma **propriedade do elemento** \(n√£o confunda com a propriedade da classe\). **N√≥s cercamos a propriedade que queremos com colchetes e assim passamos para o membro da classe**:

{% code-tabs %}
{% code-tabs-item title="src/app/input-button-unit/input-button-unit.component.ts" %}

```markup
<input [value]="title">
```

{% endcode-tabs-item %}
{% endcode-tabs %}

Tente isso e veja o resultado no navegador!

## a\# Binding para M√©todos

As express√µes que podemos fazer o bind no template n√£o s√£o limitadas √†s propriedades da classe. Elas podem ser uma chamada de m√©todo ou qualquer outra express√£o JavaScript v√°lida.

Por exemplo, vamos fazer o bind do value de um input para a chamada de um m√©todo que retorna um valor.
Primeiro, vamos adicionar o m√©todo `generateTitle()` em qualquer lugar dentro da classe exceto dentro de algum dos seus m√©todos.

{% code-tabs %}
{% code-tabs-item title="src/app/input-button-unit/input-button-unit.component.ts" %}

```typescript
generateTitle(): string {
  return 'This title was generated by a method.';
}
```

{% endcode-tabs-item %}
{% endcode-tabs %}

Substitua um ou ambos os bindings do t√≠tulo no template pela chamada do m√©todo \(n√£o se esque√ßa dos par√™nteses!\):

{% code-tabs %}
{% code-tabs-item title="src/app/input-button-unit/input-button-unit.component.ts" %}

```markup
  <input [value]="generateTitle()">

  {{ generateTitle() }}
```

{% endcode-tabs-item %}
{% endcode-tabs %}

## b\# Detec√ß√£o de mudan√ßa \(Change Detection\)

Angular tem um mecanismo de detec√ß√£o de mudan√ßa muito eficiente. Ele procura por bindings no template do componente e ent√£o atualiza o valor toda vez que a express√£o ligada √© alterada.

Para exibir isto, vamos mudar o valor do t√≠tulo depois de alguns segundos e ver o que acontece. Chame a fun√ß√£o `setTimeout` dentro de `ngOnInit`:

{% code-tabs %}
{% code-tabs-item title="src/app/input-button-unit/input-button-unit.component.ts" %}

```typescript
ngOnInit() {
  setTimeout(() => {
    this.title = 'This is not the title you are looking for';
  }, 3000);
}
```

{% endcode-tabs-item %}
{% endcode-tabs %}

`setTimeout` √© uma fun√ß√£o JavaScript. Seu primeiro par√¢metro √© o que queremos que aconte√ßa - uma fun√ß√£o de nossa escolha. O segundo par√¢metro √© o quanto queremos atras√°-la, em milissegundos. Neste exemplo, n√≥s passamos uma **fun√ß√£o an√¥nima** que altera o valor de `this.title`. Para isto n√≥s usamos uma das novas features do JavaScript (ES6) **arrow function**.

## c\# Binding para M√©todos

As express√µes que podemos fazer o bind no template n√£o s√£o limitadas √†s propriedades da classe. Elas podem ser uma chamada de m√©todo ou quase qualquer express√£o de template Angular v√°lida.

## d\# Recursos

[Angular Guide - Template Property Binding](https://angular.io/guide/template-syntax#property-binding--property-)

## e\# Nota sobre acesso ao DOM

Usando JavaScript puro, podemos inserir o valor para um input atrav√©s de suas propriedades. N√≥s vamos buscar o elemento do DOM e atribuir o valor da propriedade `title` para a propriedade `value` do elemento.

{% code-tabs %}
{% code-tabs-item title="code for example" %}

```typescript
let inputElement = document.getElementById('my-input');
inputElement.value = this.title;
```

{% endcode-tabs-item %}
{% endcode-tabs %}

Com JavaScript, n√≥s encontramos o elemento input no DOM atrav√©s do seu id, e ent√£o alteramos sua propriedade `value` para o valor da vari√°vel title. N√≥s precisamos adicionar o id ao elemento `input`, ent√£o:

{% code-tabs %}
{% code-tabs-item title="code for example" %}

```markup
<input id="my-input">
```

{% endcode-tabs-item %}
{% endcode-tabs %}

Isso ir√° funcionar no navegador

De qualquer forma, **isto √© altamente desencorajado no Angular. Voc√™ nunca pode acessar o DOM diretamente!**
Isso √© porque voc√™ pode atribuir diferentes renders para o Angular e executar a aplica√ß√£o em diferentes plataformas. Elas podem ser mobile, desktop, o at√© um rob√¥. E elas n√£o ter√£o um objeto `document` do qual voc√™ poderia manipular o resultado!
